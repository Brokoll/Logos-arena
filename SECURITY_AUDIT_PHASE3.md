# Logos Arena 3차 보안 점검 리포트 🛡️ (최종)

프로젝트 구석구석을 살펴본 결과, 운영 환경으로 넘어가기 전 정리해야 할 **마지막 보안 고리 3가지**를 발견했습니다.

---

## 1. 🔍 디버그 엔드포인트 방치 (Active Debug Route)

### 문제 상황 (`src/app/api/debug-comment/route.ts`)
개발 도중 테스트를 위해 만들어진 것으로 보이는 **디버그 API**가 남아있습니다.
- **현상**: `/api/debug-comment?argumentId=...` 경로에 접속하면, 별도의 게시판 로직을 거치지 않고 직접 DB에 댓글을 삽입하고 목록을 조회하는 테스트를 수행합니다.
- **위험**: 비록 사용자 인증은 거치지만, 정상적인 서비스 흐름(유효성 검사, 쿨타임 등)을 타지 않는 백도어 같은 통로입니다. 누군가 이를 발견하면 스팸이나 데이터 조작에 악용할 수 있습니다.
- **해결**: 개발이 완료되었다면 해당 파일(`src/app/api/debug-comment`)을 **즉시 삭제**해야 합니다.

---

## 🗑️ 관리자 실수 방지 (Accidental Deletion)

### 문제 상황 (`schema.sql:33`)
현재 DB 구조에서 토론 주제(`debates`)가 삭제되면, 해당 토론에 달린 수천 개의 `arguments`와 `comments`가 자동으로 모두 삭제되는 `ON DELETE CASCADE` 설정이 되어 있습니다.
- **위기**: 관리자가 실수로 '토론 게시글'을 하나 지웠는데, 그 안의 모든 참여 데이터가 순식간에 영구 삭제될 수 있습니다. (관리자 권한을 가진 사용자 한 명의 실수가 치명적인 데이터 소실로 이어짐)
- **해결**: 중요한 토론 데이터는 `DELETE` 대신 `status = 'deleted'`와 같은 **Soft Delete(가상 삭제)** 방식을 도입하거나, 삭제 시 한 번 더 확인 절차를 거치는 로직을 권장합니다.

---

## 🔐 외부 연동(Google OAuth) 보안

### 문제 상황
현재 이 앱은 Google OAuth 하나에만 의존하고 있습니다.
- **체크리스트**: Google Cloud Console에서 **'승인된 리디렉션 URI'**가 현재 운영 도메인만 정확히 등록되어 있는지 확인해야 합니다. (`localhost` 등이 운영 환경 설정에 포함되어 있으면 리디렉션 탈취 공격에 노출될 수 있음)
- **해결**: 운영(Production) 환경 배포 시, 구글 콘솔에서 배포용 도메인만 승인 목록에 남겨두시기 바랍니다.

---

## 🏁 최종 점검 요약
1.  **디버그 폴더 삭제**: `src/app/api/debug-comment` 삭제 권장.
2.  **데이터 보존 정책**: 관리자의 삭제 시나리오 재점검.
3.  **구글 콘솔 설정**: 리디렉션 URI 운영용으로만 한정.

이 리포트를 끝으로 현재 코드상의 보안 점검을 마칩니다. 수고하셨습니다! 🦾✨
